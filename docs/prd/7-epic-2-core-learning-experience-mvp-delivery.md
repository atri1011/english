# 7. 史诗 2: 核心学习体验与MVP交付 (Core Learning Experience & MVP Delivery)

**扩展目标:** 此史诗将在已建立的用户和技术基础上，交付产品的核心价值。完成此史诗后，用户将能够选择他们的学习画像，从预设词书中学习单词，并利用他们配置好的API密钥，实时生成独特的、符合其个人情境的场景化例句。这将完成我们MVP的闭环，使其准备好迎接首批用户并验证核心市场假设。

## 故事 2.1: 用户画像选择
* **作为一个** 首次使用的用户, **我想要** 在开始学习前，选择一个符合我学习目标的画像（如“备考学生”或“职场人士”), **以便于** AI生成的例句能够与我的学习和工作情境高度相关。
* **验收标准:**
    1.  用户在首次登录并完成API设置后，会被引导至一个一次性的用户画像选择页面。
    2.  页面上清晰地展示了“备考学生”和“职场人士”两个可选的画像。
    3.  用户的选择将被成功保存到其在数据库中的个人记录里。
    4.  选择完成后，用户被自动引导至核心学习页面。
    5.  在后续的访问中，用户不会再次看到此选择页面。

## 故事 2.2: 实现并选择预设词书
* **作为一个** 用户, **我想要** 应用中包含多个高质量的预设词书（例如 CET-4 核心词汇）, **以便于** 我可以立即从一个标准化的词汇列表开始学习。
* **验收标准:**
    1.  系统中至少预置了两本词书（例如：“CET-4核心词汇”、“商务英语核心500词”），这些词书可以作为项目内的静态资源（如JSON文件）存在。
    2.  在学习界面中，有一个清晰的下拉菜单或选项，允许用户查看并选择他们想要学习的词书。
    3.  用户的词书选择被记录下来，下次登录时应用会默认加载该词书。

## 故事 2.3: 核心学习界面
* **作为一个** 用户, **我想要** 一个简洁的学习界面，能够一次展示一个来自我所选词书的单词及其释义, **以便于** 我可以集中注意力进行学习。
* **验收标准:**
    1.  核心学习页面顶部清晰地展示了当前学习的单词。
    2.  单词下方展示了其最核心的中文释义。
    3.  页面上有一个非常醒目的“生成场景例句”按钮。
    4.  页面提供“上一个”和“下一个”的导航功能，让用户可以在当前词书中切换单词。
    5.  按钮下方预留了专门的区域，用于展示即将生成的例句。

## 故事 2.4: 后端AI代理与提示词工程
* **作为一个** 开发者, **我需要** 一个安全的后端功能，它能获取用户的API配置、构建一个专业的提示词（Prompt）、并将请求代理转发到用户指定的AI端点, **以便于** 系统能够生成高度个性化的场景例句。
* **验收标准:**
    1.  已创建一个只能由已认证用户调用的安全 Serverless Function。
    2.  该功能能够根据当前用户的ID，从数据库中获取其加密的API密钥和相关配置。
    3.  API密钥仅在请求期间于内存中解密使用，绝不泄露。
    4.  该功能会根据预设的模板，动态构建一个包含【目标单词】、【用户画像】及【来自同一词书的几个关联词】的复杂提示词。
    5.  该功能使用用户的API URL、解密后的密钥和模型名称，向兼容OpenAI的 `/v1/chat/completions` 接口发起POST请求。
    6.  成功获取AI的响应后，后端能准确解析出例句内容并返回给前端。
    7.  对所有可预见的错误（如API密钥无效、网络超时、AI服务返回错误等）都进行了妥善处理。

## 故事 2.5: 展示生成的例句与反馈UI
* **作为一个** 用户, **我想要** 在请求例句后，能清晰地看到AI生成的内容，并能方便地对其质量进行反馈, **以便于** 我能有效地学习，并帮助系统（的提示词）变得更好。
* **验收标准:**
    1.  点击“生成场景例句”按钮后，界面会显示一个加载动画，表示正在处理中。
    2.  成功获取例句后，加载动画消失，生成的例句内容会流畅地展示在预留区域。
    3.  如果生成失败，则会显示一条对用户友好的错误提示信息。
    4.  生成的例句旁边，会显示“赞”和“踩”两个清晰的图标按钮。

## 故事 2.6: 存储用户对例句的反馈
* **作为一个** 产品所有者, **我想要** 存储用户对每个例句的“赞/踩”反馈, **以便于** 我们能够分析和评估提示词工程的有效性，并为未来的优化提供数据支持。
* **验收标准:**
    1.  当用户点击“赞”或“踩”按钮时，该反馈会被异步地记录到数据库中。
    2.  存储的记录应至少包含：目标单词、生成的例句、反馈类型（赞/踩）、用户ID和时间戳。
    3.  用户提交反馈后，按钮会变为“已提交”状态（例如变灰或消失），以防止重复提交。
    4.  反馈的提交过程不会影响用户继续学习下一个单词。

---